{#if external}
	{#if asset.indexOf('vimeo') > -1}
		<div style="padding:56.25% 0 0 0;position:relative;">
			<iframe src="https://player.vimeo.com/video/{asset.split('vimeo.com/')[1]}?color=ffffff&title=0&byline=0&portrait=0" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" allow="autoplay; fullscreen" allowfullscreen title="Video asset"></iframe>
		</div>
	{/if}
{:else}
	{#if asset.mimeType.indexOf('image') === 0}
		{#if magnifier}
			<Magnifier src={asset.url} alt={alt(asset)} {width} {height} {loaded}>
				<LazyImg src={asset.url} alt={alt(asset)} {width} {height} bind:loaded/>
			</Magnifier>
		{:else}
			<LazyImg src={src(asset, { crop: true })} alt={alt(asset)} {width} {height}/>
		{/if}
	{:else if asset.mimeType.indexOf('video') === 0}
		<p>Video in the works</p>
	{/if}
{/if}

<script>
	import { src, alt } from '@johnny/utils/basic-utils'
	import LazyImg from '@johnny/svelte/LazyImg.svelte'
	import Magnifier from '@johnny/svelte/Magnifier.svelte'

	let loaded = false
	export let asset
	export let thumb = false
	export let magnifier = false

	$: external = typeof asset === 'string'
	$: width = external ? '' : (thumb ? 100 : asset.width)
	$: height = external ? '' : (thumb ? 100 : asset.height)

	// TODO: include this????
	// https://player.vimeo.com/api/player.js
</script>

<!-- <style type="text/scss"></style> -->
