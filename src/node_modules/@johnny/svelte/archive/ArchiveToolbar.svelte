<div class="toolbar">
	<div class="spread">
		<div class="boxes">
			<div class="box">
				<SelectBox
					title="Content Type"
					on:change={() => changed('type', contentValue)}
					primary="All Content Types"
					bind:value={contentValue}
					options={content_types}/>
			</div>
			<div class="box">
				<SelectBox
					title="Decade"
					on:change={() => changed('decade', decadeValue)}
					primary="All Decades"
					bind:value={decadeValue}
					options={decades}/>
			</div>
			<div class="box">
				<SelectBox
					title="Subject"
					on:change={() => changed('subject', subjectValue)}
					primary="All Subjects"
					bind:value={subjectValue}
					options={subjects}/>
			</div>
		</div>
		<div class="search">
			<SearchBar/>
		</div>
	</div>
</div>

<script>
	import SelectBox from '@johnny/svelte/SelectBox.svelte'
	import SearchBar from '@johnny/svelte/SearchBar.svelte'

	export let content_types = []
	// TODO: preload this from the backend
	export let decades = ['1950s', '1960s', '1970s', '1980s', '1990s', '2000s', '2010s']
	export let subjects = []

	export let contentValue
	export let decadeValue
	export let subjectValue

	import { createEventDispatcher } from 'svelte'
	const dispatch = createEventDispatcher()
	const changed = (key, value) => dispatch('filter', { key, value })
</script>

<style type="text/scss">
	.toolbar {
		margin: -100rem -30rem 65rem;
		padding: 25rem 30rem;
		background-color: #d8d8da;
	}
	.spread {
		display: flex;
		justify-content: space-between;
		align-items: flex-end;
	}
	.boxes {
		display: flex;
	}
	.box {
		width: 190rem;
		margin-right: 40rem;
	}
	.search {
		width: 100%;
		max-width: 300rem;
	}
	@media (--medium-down) {
		.spread {
			flex-direction: column;
			justify-content: flex-start;
			align-items: center;
		}
		.boxes {
			margin: 0 0 20rem;
		}
		.box {
			width: 200rem;
			&:last-child {
				margin-right: 0;
			}
		}
		.search {
			max-width: 680rem;
		}
	}
	@media (--small-down) {
		.toolbar {
			margin: -40rem -20rem 65rem;
		}
		.boxes {
			flex-direction: column;
			width: 100%;
		}
		.box {
			width: auto;
			margin: 0 0 20rem;
			&:last-child {
				margin: 0;
			}
		}
		.search {
			max-width: none;
		}
	}
</style>
