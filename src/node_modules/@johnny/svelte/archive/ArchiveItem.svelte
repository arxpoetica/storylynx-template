<!-- <p>{JSON.stringify(item)}</p> -->

<div class="asset">
	<a href="/archive/{item.slug}" rel=prefetch>
		<div class="img">
			<LazyImg {src} {alt}/>
		</div>
		<div class="texts">
			<h2>
				{item.title || '[This Asset has no title.]'} 
				{#if item.decade}
					<span>({item.decade})</span>
				{/if}
			</h2>
			<h3 class="h6">{item.contentType || 'Uncategorized'}</h3>
			<!-- <h3>{formattedstamp(item.publishedDatetime)}</h3> -->
			<h4 class="h6">Explore</h4>
		</div>
	</a>
	<!-- <p>externalAssets: {item.externalAssets}</p> -->
	<!-- <p>{item.summary}</p> -->
	<!-- <h4>Tags:</h4>
	<div class="tags">
		{#each item.tags.map(tag => tag.tag) as tag}
			<strong>{tag}</strong>
		{/each}
	</div> -->
</div>

<script>
	import { src as source, formattedstamp } from '@johnny/utils/basic-utils.js'
	import LazyImg from '@johnny/svelte/LazyImg.svelte'
	export let item

	// {#each item.assets as img}
	// 	<img src={img.url} alt={img.summary || 'nada'}/>
	// 	<!-- assets { id url summary handle mimeType filename } -->
	// {/each}

	// source(item.assets[0], { crop: true, width: 700, height: 700 })
	$: src = source(item.assets.length ? item.assets[0] : null, { crop: true })
	$: alt = item.summary ? item.summary : 'No description for this asset.'

	let summary = ''
	$: if (item.summary) {
		summary = item.summary
	// } else if (item.content.text) { // FIXME: change content type to RichTextAST:
	// 	const text = item.content.text
	// 	summary = text.length > 100 ? text.slice(0, 99).trim() + '...' : text
	} else {
		summary = 'No summary.'
	}
</script>

<style type="text/scss">
	.asset {
		padding: 35rem;
		border: 1px solid transparent;
		color: $black;
		transition: border-color 0.15s ease-in-out;
		&:hover {
			border-color: #cdccd0;
			a {
				text-decoration: none;
			}
			h4 {
				color: $black;
			}
		}
	}
	a {
		color: $black;
	}
	.img {
		margin: 0 0 35rem;
	}
	.texts {
		display: flex;
		flex-direction: column;
		align-items: center;
	}
	h3 {
		order: 1;
		margin: 0 0 10rem;
	}
	h2 {
		order: 2;
		margin: 0 0 30rem;
		font: 15rem/1.2 $font;
		letter-spacing: 0.3rem;
		span {
			margin-left: 6rem;
		}
	}
	h4 {
		order: 2;
		margin: 0;
		color: transparent;
		transition: color 0.15s ease-in-out;
	}
	// .tags {
	// 	display: flex;
	// 	strong {
	// 		margin-right: 4rem;
	// 		padding: 0 4rem;
	// 		background-color: $gray-6;
	// 		border: 1px solid $gray-4;
	// 		cursor: pointer;
	// 	}
	// }
	@media (--small-down) {
		.asset {
			margin: 0 0 35rem;
			padding: 0;
			&:hover {
				border-color: transparent;
				h4 {
					color: transparent;
				}
			}
		}
	}
</style>
