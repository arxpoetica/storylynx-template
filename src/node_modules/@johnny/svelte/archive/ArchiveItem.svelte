<!-- <p>{JSON.stringify(asset)}</p> -->

<div class="asset">
	<a href="/archive/{asset.slug}" rel=prefetch>
		<div class="media" on:contextmenu={event => event.preventDefault()}>
			<Asset asset={first_asset} thumb={true}/>
		</div>
		<div class="texts">
			<h2>
				{asset.title || '[This Asset has no title.]'} 
				{#if asset.year}
					<span>({asset.year})</span>
				{/if}
			</h2>
			<h3 class="h6">{asset.contentType || 'Uncategorized'}</h3>
			<h4 class="h6">Explore</h4>
		</div>
	</a>
</div>

<script>
	import Asset from '@johnny/svelte/Asset.svelte'
	export let asset
	$: all_assets = asset.assetLinks.concat(asset.assets)
	// FIXME: if no asset, then it shouldn't display at all...
	$: first_asset = all_assets.length ? all_assets[0] : 'FIXME:'
</script>

<style type="text/scss">
	.asset {
		padding: 35rem;
		border: 1px solid transparent;
		color: $black;
		transition: border-color 0.15s ease-in-out;
		&:hover {
			border-color: #cdccd0;
			a {
				text-decoration: none;
			}
			h4 {
				color: $black;
			}
		}
	}
	a {
		color: $black;
	}
	.media {
		margin: 0 0 35rem;
	}
	.texts {
		display: flex;
		flex-direction: column;
		align-items: center;
	}
	h3 {
		order: 1;
		margin: 0 0 10rem;
		font-weight: $heavy;
		text-align: center;
	}
	h2 {
		order: 2;
		margin: 0 0 30rem;
		font: 15rem/1.2 $font;
		letter-spacing: 0.3rem;
		text-align: center;
		span {
			margin-left: 6rem;
		}
	}
	h4 {
		order: 2;
		margin: 0;
		color: transparent;
		text-align: center;
		transition: color 0.15s ease-in-out;
	}
	@media (--small-down) {
		.asset {
			margin: 0 0 35rem;
			padding: 0;
			&:hover {
				border-color: transparent;
				h4 {
					color: transparent;
				}
			}
		}
	}
</style>
