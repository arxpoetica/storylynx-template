<div class="search-bar">
	<input type="text" bind:value={indirect_value} placeholder="Search"/>
	<!-- {$search_term} -->
</div>

<script>
	import { search_term } from '@lynx/stores/app-store'

	let indirect_value = ''
	let no_touch_backs = false
	let interval

	$: if (no_touch_backs && typeof indirect_value === 'string') {
		clearTimeout(interval)
		interval = setTimeout(() => {
			search_term.set(encodeURIComponent(indirect_value))
			no_touch_backs = false
		}, 250)
	} else {
		if ($search_term !== indirect_value) {
			indirect_value = decodeURIComponent($search_term)
		}
		no_touch_backs = true
	}
</script>

<style type="text/scss">
	input {
		padding: 0 10rem;
		height: 34rem;
		width: 100%;
		margin: 0;
		// background-color: white;
		background-color: transparent;
		border: 1px solid #afafb1;
		border-radius: 0;
		line-height: 34rem;
		font: inherit;
		&:hover,
		&:focus {
			border-color: $black;
		}
	}
</style>
